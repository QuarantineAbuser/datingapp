<!--suppress ALL -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<section class="row pt-2 pb-2" style="background-image: linear-gradient(rebeccapurple,mediumpurple)">
  <div class="container align-middle">
    <h3 class="jumbotron-heading text-center font-weight-bolder">TIMELINE</h3>
  </div>
</section>
  <div class="text-center">
    <h5>
      <a th:href="@{'/timeline/add'}" class="btn btn-sm btn-info">
        <i class="fa fa-trash">Add New Post</i></a>
    </h5>
  </div>
<div class="container mb-4" style="min-height: 250px">
  <div class="row">
    <div class="col-12" th:if="${posts.size() > 0}">
      <div class="table-responsive" style="background-color: #FDE3E3;">
          <table class="table table-striped">
            <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Content</th>
              <th scope="col">Likes</th>
              <th scope="col">Date Posted</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post : ${posts}">
              <td><a th:text="${post.getUser().getNameAndSurname()}"
                     th:href="@{'/timeline/profile/{username}' (username=${post.getUser().getUsername()})}"
                     class="btn btn-sm btn-link"></a></td>
              <td th:text="${post.getContent()}"></td>
              <td th:text="${post.getLikes().size()}"></td>
              <td th:text="${post.getFormattedDate()}"></td>
              <td class="text-right">
                <form th:if="${post.getLikes().contains(activeUser)} == false"
                      th:action="@{'/timeline/like/{id}' (id=${post.getId()})}"
                      th:method="PUT">
                  <button type="submit" class="btn btn-sm btn-success">
                    <i class="fa fa-trash">Like</i></button>
                </form>
                <form th:if="${post.getLikes().contains(activeUser)} == true"
                      th:action="@{'/timeline/unlike/{id}' (id=${post.getId()})}"
                      th:method="DELETE">
                  <button type="submit" class="btn btn-sm btn-danger">
                    <i class="fa fa-trash">Unlike</i></button>
                </form>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-12 pt-5" th:if="${posts.size() == 0}">
        <h4 class="jumbotron-heading text-center">There are no posts yet!</h4>
      </div>
    </div>
  </div>
</html>
